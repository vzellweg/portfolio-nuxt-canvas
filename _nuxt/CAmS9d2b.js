import{t as b,c as I,u as S}from"./Bjn1VLZR.js";import{J as d,r as g,o as E}from"./BQiJsLZT.js";import{a as _,b as A}from"./X7-0cAJ2.js";function w(...o){return d(()=>o.every(a=>b(a)))}function x(o){return d(()=>!b(o))}const D=()=>{const o=d(()=>navigator&&navigator.userAgent&&navigator.userAgent.match(/Macintosh;/)),a=g(" "),u=_(),f=d(()=>{var m,p,e;const s=(m=u.value)==null?void 0:m.tagName,l=(p=u.value)==null?void 0:p.contentEditable;return s==="INPUT"||s==="TEXTAREA"||l==="true"||l==="plaintext-only"?((e=u.value)==null?void 0:e.name)||!0:!1});return E(()=>{a.value=o.value?"âŒ˜":"Ctrl"}),{macOS:o,metaSymbol:a,activeElement:u,usingInput:f}},$=I(D),j=/^[^-]+.*-.*[^-]+$/,C=/^[^_]+.*_.*[^_]+$/,O=(o,a={})=>{const{macOS:u,usingInput:f}=$();let s=[];const l=g([]),h=()=>{l.value.splice(0,l.value.length)},m=S(h,a.chainDelay??800),p=e=>{if(!e.key)return;const c=/^[a-z]{1}$/i.test(e.key);let t;if(l.value.push(e.key),l.value.length>=2){t=l.value.slice(-2).join("-");for(const n of s.filter(i=>i.chained))if(n.key===t){n.condition.value&&(e.preventDefault(),n.handler()),h();return}}for(const n of s.filter(i=>!i.chained))if(e.key.toLowerCase()===n.key&&e.metaKey===n.metaKey&&e.ctrlKey===n.ctrlKey&&!(c&&e.shiftKey!==n.shiftKey)){n.condition.value&&(e.preventDefault(),n.handler()),h();return}m()};s=Object.entries(o).map(([e,c])=>{var v,K;if(!c)return null;let t;e.includes("-")&&e!=="-"&&!((v=e.match(j))!=null&&v.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`),e.includes("_")&&e!=="_"&&!((K=e.match(C))!=null&&K.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`);const n=e.includes("-")&&e!=="-";if(n)t={key:e.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const r=e.toLowerCase().split("_").map(y=>y);t={key:r.filter(y=>!["meta","ctrl","shift","alt"].includes(y)).join("_"),metaKey:r.includes("meta"),ctrlKey:r.includes("ctrl"),shiftKey:r.includes("shift"),altKey:r.includes("alt")}}if(t.chained=n,!u.value&&t.metaKey&&!t.ctrlKey&&(t.metaKey=!1,t.ctrlKey=!0),typeof c=="function"?t.handler=c:typeof c=="object"&&(t={...t,handler:c.handler}),!t.handler)return console.trace("[Shortcut] Invalid value"),null;const i=[];return c.usingInput?typeof c.usingInput=="string"&&i.push(d(()=>f.value===c.usingInput)):i.push(x(f)),t.condition=w(...i,...c.whenever||[]),t}).filter(Boolean),A("keydown",p)};function R(o){const a=document.createElement("input");a.setAttribute("value",o),document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a)}export{R as c,O as d};
